<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo-Time Chart Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;1,400&family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdn.jsdelivr.net/npm/astronomy-engine@2.1.19/astronomy.browser.min.js"></script>

    <!-- PROTECTION SCRIPT (OBFUSCATED) -->
    <script>
    (function(){var _0x9a2=["\x63\x6F\x6E\x74\x65\x78\x74\x6D\x65\x6E\x75","\x70\x72\x65\x76\x65\x6E\x74\x44\x65\x66\x61\x75\x6C\x74","\x61\x64\x64\x45\x76\x65\x6E\x74\x4C\x69\x73\x74\x65\x6E\x65\x72","\x6B\x65\x79\x64\x6F\x77\x6E"];document[_0x9a2[2]](_0x9a2[0],function(_0x1){_0x1[_0x9a2[1]]();});document[_0x9a2[2]](_0x9a2[3],function(_0x1){if(_0x1.keyCode==123){return false;}if(_0x1.ctrlKey&&_0x1.shiftKey&&(_0x1.keyCode==73||_0x1.keyCode==74||_0x1.keyCode==67)){return false;}if(_0x1.ctrlKey&&_0x1.keyCode==85){return false;}});})();
    </script>

    <style>
        :root { --primary: #2c3e50; --accent-analysis: #2980b9; --bg-color: #f4f6f8; --text-main: #333333; --text-light: #555555; --nav-height: 70px; }
        body { font-family: 'Merriweather', serif; line-height: 1.8; color: var(--text-main); background-color: var(--bg-color); margin: 0; padding-top: calc(var(--nav-height) + 20px) !important; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
        h1, h2, h3 { font-family: 'Montserrat', sans-serif; color: var(--primary); }
        .navbar { position: fixed; top: 0; left: 0; width: 100%; height: var(--nav-height); background: #fff; box-shadow: 0 4px 20px rgba(0,0,0,0.08); z-index: 1000; display: flex; align-items: center; justify-content: space-between; padding: 0 30px; box-sizing: border-box; }
        .nav-brand { font-family: 'Montserrat', sans-serif; font-weight: 800; font-size: 1.2em; color: var(--primary); display: flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 1px; text-decoration: none; }
        .nav-container { display: flex; gap: 10px; align-items: center; }
        .nav-btn { background: none; border: none; padding: 8px 16px; font-family: 'Montserrat', sans-serif; font-weight: 600; font-size: 0.85em; cursor: pointer; border-radius: 20px; transition: all 0.3s ease; color: var(--text-light); display: flex; align-items: center; gap: 8px; white-space: nowrap; text-decoration: none; }
        .nav-btn:hover { background-color: #f0f0f0; color: var(--primary); }
        .nav-btn.active { background-color: var(--accent-analysis); color: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .contact-dropdown-wrapper { position: relative; }
        .contact-dropdown { position: absolute; top: calc(100% + 15px); right: 0; width: min(340px, 95vw); background: white; border-radius: 16px; box-shadow: 0 10px 40px -10px rgba(0,0,0,0.2); border: 1px solid rgba(0,0,0,0.05); padding: 20px; display: none; flex-direction: column; gap: 12px; z-index: 2000; animation: dropdownFadeIn 0.2s cubic-bezier(0.16, 1, 0.3, 1); }
        .contact-dropdown.show { display: flex; }
        .contact-dropdown::before { content: ''; position: absolute; top: -6px; right: 20px; width: 12px; height: 12px; background: white; transform: rotate(45deg); border-top: 1px solid rgba(0,0,0,0.05); border-left: 1px solid rgba(0,0,0,0.05); }
        .contact-header { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.05em; color: #94a3b8; font-weight: 700; margin-bottom: 4px; padding-left: 4px; }
        .contact-item { display: flex; align-items: flex-start; gap: 15px; padding: 12px 16px; border-radius: 12px; background: #f8fafc; color: var(--text-main); text-decoration: none; transition: all 0.2s ease; border: 1px solid transparent; cursor: pointer; flex-wrap: wrap; }
        .contact-item:hover { background: #f0f9ff; border-color: #bfdbfe; transform: translateY(-2px); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05); }
        .contact-item.expanded { background: #f0f9ff; border-color: #bfdbfe; }
        .contact-icon-box { width: 40px; height: 40px; border-radius: 10px; background: white; display: flex; align-items: center; justify-content: center; color: var(--accent-analysis); box-shadow: 0 2px 4px rgba(0,0,0,0.05); font-size: 1.1em; flex-shrink: 0; }
        .contact-text-box { display: flex; flex-direction: column; flex: 1; justify-content: center; min-height: 40px; }
        .contact-label { font-size: 0.7em; font-weight: 700; color: #64748b; text-transform: uppercase; }
        .contact-value { font-size: 0.85rem; font-weight: 600; color: #334155; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; line-height: 1.3; }
        .email-domain { font-weight: 500; color: #94a3b8; font-size: 0.95em; }
        .item-actions { width: 100%; display: none; gap: 10px; margin-top: 10px; padding-top: 10px; border-top: 1px solid #e2e8f0; animation: slideDown 0.2s ease-out; }
        .contact-item.expanded .item-actions { display: flex; }
        .action-btn { flex: 1; padding: 8px; border-radius: 8px; border: none; font-family: 'Montserrat', sans-serif; font-size: 0.75rem; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 6px; transition: all 0.2s; text-decoration: none; }
        .btn-copy { background: #e2e8f0; color: #475569; }
        .btn-copy:hover { background: #cbd5e1; }
        .btn-action-primary { background: #25D366; color: white; }
        .btn-action-primary:hover { background: #128c7e; }
        .btn-action-blue { background: var(--accent-analysis); color: white; }
        .btn-action-blue:hover { background: #1d6fa5; }
        @keyframes dropdownFadeIn { from { opacity: 0; transform: translateY(-10px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        @media (max-width: 768px) { .navbar { padding: 0 15px; } .nav-brand span { display: none; } .nav-brand i { font-size: 1.5em; } .nav-btn { padding: 6px 10px; font-size: 0.75em; } .nav-container { gap: 5px; } }
        @media print { .navbar { display: none !important; } body { padding-top: 0 !important; } #acc-psycho, #acc-energy, #acc-speed, #acc-ppf, #acc-sun, #acc-moon, #acc-guide { display: block !important; } [id^="icon-acc-"] { display: none !important; } }
        .suggestions-list::-webkit-scrollbar { width: 8px; }
        .suggestions-list::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 4px; }
        .suggestions-list::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .suggestions-list::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        .loader { border-top-color: #3498db; animation: spinner 1.5s linear infinite; }
        @keyframes spinner { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .asc-row { background-color: #eff6ff; border-left: 3px solid #3b82f6; }
        .node-row { color: #64748b; font-style: italic; }
        .ampm-btn.active { background-color: var(--accent-analysis) !important; color: white; border-color: var(--accent-analysis) !important; }
        .input-center { text-align: center; text-align-last: center; -moz-text-align-last: center; }
        .font-serif-title { font-family: 'Playfair Display', serif; }
        .chart-text { font-family: sans-serif; font-size: 10px; fill: #1e293b; font-weight: 600; text-anchor: middle; dominant-baseline: middle; }
        .curved-label { font-family: sans-serif; font-size: 9px; font-weight: 800; fill: #334155; letter-spacing: 0.5px; text-transform: uppercase; }
        .planet-label { font-size: 11px; font-weight: bold; fill: #0f172a; cursor: default; pointer-events: none; }
        .planet-label-glow { text-shadow: 0 0 4px #fff, 0 0 4px #fff, 0 0 4px #fff; }
        .cardinal-label { font-size: 14px; font-weight: 800; fill: #1e293b; }
        .cardinal-sub { font-size: 9px; font-weight: 600; fill: #64748b; }
        .house-number { font-size: 14px; font-weight: bold; fill: #334155; opacity: 0.3; }
        .flow-node { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .flow-node:hover { transform: translateY(-4px) scale(1.05); }
        .narrative-chip { transition: all 0.2s ease; }
        .narrative-chip:hover { transform: scale(1.02); box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); }
        .timeline-line { position: absolute; left: 24px; top: 30px; bottom: 0; width: 2px; background: #e2e8f0; z-index: 0; }
        .timeline-item { position: relative; z-index: 1; padding-left: 60px; padding-bottom: 24px; }
        .timeline-dot { position: absolute; left: 19px; top: 2px; width: 12px; height: 12px; border-radius: 50%; background: #cbd5e1; border: 2px solid #fff; box-shadow: 0 0 0 1px #cbd5e1; z-index: 2; }
        .timeline-item.active .timeline-dot { background: #4f46e5; box-shadow: 0 0 0 4px #e0e7ff; }
        .planet-flow-scroll::-webkit-scrollbar { height: 4px; }
        .planet-flow-scroll::-webkit-scrollbar-track { background: transparent; }
        .planet-flow-scroll::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .compact-table th { padding: 10px 12px; font-size: 11px; text-transform: uppercase; letter-spacing: 0.05em; color: #ffffff; background-color: #1e293b; border-bottom: 1px solid #334155; font-weight: 700; }
        .compact-table td { padding: 8px 12px; font-size: 12px; border-bottom: 1px solid #f1f5f9; white-space: nowrap; }
        .compact-table tr:hover td { background-color: #f8fafc; }
        .compact-table tr:last-child td { border-bottom: none; }
        .btn-primary-new { background-color: var(--accent-analysis); }
        .btn-primary-new:hover { opacity: 0.9; }
        .ring-accent-new:focus { --tw-ring-color: var(--accent-analysis); }
        .text-primary-new { color: var(--primary); }
        .text-accent-new { color: var(--accent-analysis); }
        .text-light-new { color: var(--text-light); }
    </style>
</head>
<body>

    <nav class="navbar">
        <a href="index.html" class="nav-brand"><i class="fa-solid fa-shapes"></i><span>Architecture of Self</span></a>
        <div class="nav-container">
            <a href="index.html" class="nav-btn"><i class="fa-solid fa-arrow-left"></i> Back to Guide</a>
            <div class="contact-dropdown-wrapper">
                <!-- RENAMED FUNCTION CALL -->
                <button class="nav-btn active" id="helpBtn" onclick="_c1(event)"><i class="fa-solid fa-phone"></i> Need Help</button>
                <div id="contactDropdown" class="contact-dropdown">
                    <div class="contact-header">Connect with me</div>
                    <!-- RENAMED FUNCTION CALL -->
                    <div class="contact-item" id="phoneItem" onclick="_c2(event, 'phoneItem')">
                        <div class="contact-icon-box"><i class="fa-solid fa-phone-volume"></i></div>
                        <div class="contact-text-box"><span class="contact-label">Call / WhatsApp</span><span class="contact-value">+91-8360-362525</span></div>
                        <div class="item-actions">
                            <!-- RENAMED FUNCTION CALL -->
                            <button class="action-btn btn-copy" onclick="_c3(event, '+918360362525')"><i class="fa-regular fa-copy"></i> <span>Copy</span></button>
                            <a href="https://wa.me/918360362525" target="_blank" class="action-btn btn-action-primary" onclick="event.stopPropagation()"><i class="fa-brands fa-whatsapp"></i> Text Me</a>
                        </div>
                    </div>
                    <!-- RENAMED FUNCTION CALL -->
                    <div class="contact-item" id="emailItem" onclick="_c2(event, 'emailItem')">
                        <div class="contact-icon-box"><i class="fa-solid fa-envelope-open-text"></i></div>
                        <div class="contact-text-box"><span class="contact-label">Email Support</span><span class="contact-value">brainmanual<span class="email-domain">@gmail.com</span></span></div>
                        <div class="item-actions">
                             <!-- RENAMED FUNCTION CALL -->
                            <button class="action-btn btn-copy" onclick="_c3(event, 'brainmanual@gmail.com')"><i class="fa-regular fa-copy"></i> <span>Copy</span></button>
                            <a href="mailto:brainmanual@gmail.com" target="_blank" class="action-btn btn-action-blue" onclick="event.stopPropagation()"><i class="fa-solid fa-paper-plane"></i> Send Email</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto flex flex-col gap-6 p-4 md:p-8">
        <div class="bg-white p-6 rounded-2xl shadow-md border border-slate-200 flex flex-col md:flex-row items-center justify-between w-full">
            <div class="flex items-center gap-3"><i class="ph ph-star-four text-4xl text-accent-new"></i><div><h1 class="text-2xl font-bold">Geo-Time Chart Calculator</h1><p class="text-light-new text-sm">Positions (Lahiri) &bull; Octal House Map &bull; Planetary Data</p></div></div>
            <div id="ayanamsa-display" class="mt-4 md:mt-0 bg-slate-50 px-4 py-2 rounded-lg font-mono text-sm border border-slate-200 text-primary-new"></div>
        </div>

        <div class="bg-white p-6 rounded-2xl shadow-md border border-slate-200 w-full">
            <h2 class="text-lg font-bold mb-4 flex items-center gap-2 border-b border-slate-100 pb-2"><i class="ph ph-sliders-horizontal"></i> Input Details</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="space-y-4">
                    <div><label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Name</label><input type="text" id="name-input" placeholder="Enter Name" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new text-slate-700 font-medium"></div>
                    <div class="relative w-full"><label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">PLACE OF BIRTH</label><div class="relative"><div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"><i class="ph ph-map-pin text-slate-400 text-lg"></i></div><input type="text" id="location-input" class="w-full pl-9 pr-9 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new transition shadow-sm" placeholder="Start typing a city..." autocomplete="off"><div id="loading-spinner" class="absolute inset-y-0 right-0 pr-3 flex items-center hidden"><div class="loader ease-linear rounded-full border-2 border-t-2 border-slate-200 h-4 w-4"></div></div><button id="clear-btn" class="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600 hidden"><i class="ph ph-x-circle text-lg"></i></button></div><ul id="suggestions" class="absolute z-50 w-full bg-white border border-slate-200 rounded-lg shadow-xl mt-1 max-h-60 overflow-y-auto hidden suggestions-list"></ul></div>
                </div>
                <div class="space-y-3">
                    <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Date & Time</label>
                    <div class="flex items-end gap-2 w-full">
                        <div class="flex flex-col w-[25%]"><span class="text-[10px] font-bold text-slate-400 uppercase text-center mb-1">Day</span><div class="relative w-full"><select id="day-input" class="input-center w-full appearance-none px-1 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new bg-white text-slate-700 font-medium text-center text-xs"></select></div></div>
                        <div class="flex flex-col w-[35%]"><span class="text-[10px] font-bold text-slate-400 uppercase text-center mb-1">Month</span><div class="relative w-full"><select id="month-input" class="input-center w-full appearance-none px-1 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new bg-white text-slate-700 font-medium text-center text-xs"></select></div></div>
                        <div class="flex flex-col w-[40%]"><span class="text-[10px] font-bold text-slate-400 uppercase text-center mb-1">Year</span><div class="relative w-full"><input type="number" id="year-input" list="year-options" class="input-center w-full px-1 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new bg-white text-slate-700 font-medium text-center text-xs" placeholder="YYYY"><datalist id="year-options"></datalist></div></div>
                    </div>
                    <div class="flex items-end gap-2 mt-2">
                        <div class="flex flex-col w-20"><span class="text-[10px] font-bold text-slate-400 uppercase text-center mb-1">Hours</span><div class="relative w-full"><select id="hour-input" class="input-center w-full appearance-none px-1 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new bg-white text-slate-700 font-medium text-center text-xs"></select></div></div>
                        <span class="text-slate-400 font-bold mb-2 pb-0.5">:</span>
                        <div class="flex flex-col w-20"><span class="text-[10px] font-bold text-slate-400 uppercase text-center mb-1">Mins</span><div class="relative w-full"><select id="minute-input" class="input-center w-full appearance-none px-1 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 ring-accent-new bg-white text-slate-700 font-medium text-center text-xs"></select></div></div>
                        <div class="flex bg-slate-100 rounded-lg p-0.5 border border-slate-200 w-24 h-[34px] mb-[1px]">
                            <!-- RENAMED FUNCTION CALL -->
                            <button type="button" onclick="_c5('AM')" id="btn-am" class="ampm-btn flex-1 rounded text-[10px] font-bold py-1 text-slate-500 transition-colors">AM</button>
                            <!-- RENAMED FUNCTION CALL -->
                            <button type="button" onclick="_c5('PM')" id="btn-pm" class="ampm-btn flex-1 rounded text-[10px] font-bold py-1 text-slate-500 transition-colors">PM</button>
                        </div>
                        <input type="hidden" id="ampm-value" value="AM">
                    </div>
                </div>
                <div class="flex flex-col justify-between">
                    <div class="grid grid-cols-2 gap-3 mb-4">
                        <div class="bg-slate-50 p-2 rounded border border-slate-200"><span class="block text-[10px] font-bold text-slate-400 uppercase">Latitude</span><span id="lat-display" class="font-mono font-medium text-slate-700">28.6139</span></div>
                        <div class="bg-slate-50 p-2 rounded border border-slate-200"><span class="block text-[10px] font-bold text-slate-400 uppercase">Longitude</span><span id="lng-display" class="font-mono font-medium text-slate-700">77.2090</span></div>
                    </div>
                    <input type="hidden" id="latitude" value="28.6139"><input type="hidden" id="longitude" value="77.2090">
                    <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c6()" class="w-full py-3 btn-primary-new text-white rounded-lg font-semibold transition shadow-sm flex items-center justify-center gap-2"><i class="ph ph-chart-polar"></i> Generate Report</button>
                </div>
            </div>
        </div>

        <div class="w-full space-y-6">
            <div class="bg-white rounded-2xl shadow-md border border-slate-200 p-6 flex flex-col items-center">
                <div class="flex flex-col items-center text-center w-full mb-6">
                    <h3 class="font-serif-title font-bold text-lg md:text-2xl text-slate-800 uppercase tracking-wide">Geo-Time Zone Map</h3>
                    <span id="octal-map-details" class="font-sans font-bold text-indigo-900 text-sm md:text-base mt-1 block"></span>
                </div>
                <div id="octal-chart-container" class="w-full max-w-[550px] aspect-square relative flex items-center justify-center bg-slate-50 rounded-full border border-slate-100"><span class="text-slate-400 text-sm">Click "Generate Report" to view chart</span></div>
            </div>

            <div class="bg-white rounded-2xl shadow-md border border-slate-200 overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse compact-table" id="results-table">
                        <thead><tr><th>Planet</th><th>House Label (No.)</th><th>Rashi</th><th>Longitude</th><th>Nakshatra</th></tr></thead>
                        <tbody class="text-slate-700"><tr><td colspan="5" class="p-8 text-center text-slate-400 italic">Waiting for input...</td></tr></tbody>
                    </table>
                </div>
            </div>

            <div id="results-container" class="hidden space-y-4">
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-psycho')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-purple-400 border border-slate-600"><i class="ph ph-brain text-xl"></i></div><div><h3 class="font-bold text-white">Psycho-Analysis</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Emotional Pattern & Energy Flow <span id="psycho-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-psycho" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-psycho" class="hidden border-t border-slate-100 p-6">
                        <div class="mb-8">
                            <p class="text-slate-600 text-sm leading-relaxed mb-6 border-l-4 border-indigo-200 pl-4 bg-slate-50 py-3 rounded-r-lg">In this system, <strong>TAMAS</strong> houses (3, 5, 6, 8) act as <span class="text-emerald-500 font-semibold">Energy Producers</span>. <strong>RAJAS</strong> houses (2, 9, 11, 12) are <span class="text-orange-600 font-semibold">Action Oriented</span>. The cycle flows from needing support (Tamas) to performing action (Rajas).</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="bg-gradient-to-br from-emerald-50 to-white rounded-xl border border-emerald-100 overflow-hidden shadow-sm">
                                    <div class="px-4 py-3 bg-emerald-100/50 border-b border-emerald-100 flex justify-between items-center"><span class="font-bold text-emerald-800 flex items-center gap-2"><i class="ph ph-battery-charging text-lg"></i> TAMAS (Energy Source)</span><span id="tamas-count" class="text-xs font-bold bg-white px-2 py-1 rounded text-emerald-600 border border-emerald-100">0 Planets</span></div>
                                    <div class="p-4"><p class="text-xs text-black mb-3 italic">Emotions created, batteries charging, seeking support.</p><div id="tamas-list" class="flex flex-wrap gap-2 min-h-[40px]"></div></div>
                                </div>
                                <div class="bg-gradient-to-br from-orange-50 to-white rounded-xl border border-orange-100 overflow-hidden shadow-sm">
                                    <div class="px-4 py-3 bg-orange-100/50 border-b border-orange-100 flex justify-between items-center"><span class="font-bold text-orange-800 flex items-center gap-2"><i class="ph ph-lightning text-lg"></i> RAJAS (Action Release)</span><span id="rajas-count" class="text-xs font-bold bg-white px-2 py-1 rounded text-orange-600 border border-orange-100">0 Planets</span></div>
                                    <div class="p-4"><p class="text-xs text-black mb-3 italic">Emotions released, batteries draining, action taking.</p><div id="rajas-list" class="flex flex-wrap gap-2 min-h-[40px]"></div></div>
                                </div>
                            </div>
                            <div id="analysis-summary" class="mt-6 text-sm text-slate-700 bg-slate-50 p-4 rounded-lg border border-slate-200"></div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-energy')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-indigo-400 border border-slate-600"><i class="ph ph-flow-arrow text-xl"></i></div><div><h3 class="font-bold text-white">Energy Flow Narrative</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Planetary Sequence & Story <span id="energy-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-energy" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-energy" class="hidden border-t border-slate-100 p-6">
                        <div id="energy-flow-container" class="border-b border-slate-100 pb-6 mb-6"></div>
                        <div><h5 class="text-sm font-bold text-slate-700 uppercase tracking-wider mb-4 flex items-center gap-2"><i class="ph ph-chat-text"></i> Detailed Narrative</h5><div id="energy-narrative-container" class="flex flex-wrap gap-2 text-sm"></div></div>
                    </div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-speed')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-teal-400 border border-slate-600"><i class="ph ph-speedometer text-xl"></i></div><div><h3 class="font-bold text-white">Energy Support & Speed Analysis</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Tamas Supply vs Rajas Demand <span id="speed-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-speed" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-speed" class="hidden border-t border-slate-100 p-6"><div id="energy-support-container" class="flex flex-col gap-6"></div></div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-ppf')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-blue-400 border border-slate-600"><i class="ph ph-clock-counter-clockwise text-xl"></i></div><div><h3 class="font-bold text-white">Past-Present-Future Cycles</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Mars, Jupiter, Saturn <span id="long-cycle-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-ppf" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-ppf" class="hidden border-t border-slate-100 p-6"><div id="long-cycle-container" class="grid grid-cols-1 gap-6"></div></div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-sun')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-amber-400 border border-slate-600"><i class="ph ph-sun text-xl"></i></div><div><h3 class="font-bold text-white">Monthly Emotional Rhythmic Pattern</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Annual Solar Transit <span id="monthly-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-sun" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-sun" class="hidden border-t border-slate-100 p-6"><div id="sun-cycle-container" class="space-y-4"></div></div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-moon')" class="w-full flex items-center justify-between p-4 bg-slate-800 hover:bg-slate-700 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-slate-700 p-2 rounded-lg text-slate-300 border border-slate-600"><i class="ph ph-moon text-xl"></i></div><div><h3 class="font-bold text-white">Daily Emotional Rhythmic Pattern</h3><p class="text-xs text-slate-400 uppercase tracking-wide font-semibold">Lunar Transit <span id="daily-details" class="normal-case font-normal text-indigo-300 ml-1"></span></p></div></div><i id="icon-acc-moon" class="ph ph-caret-down text-slate-400 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-moon" class="hidden border-t border-slate-100 p-6"><div id="moon-cycle-container" class="space-y-4"></div></div>
                </div>
                <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                     <!-- RENAMED FUNCTION CALL -->
                    <button onclick="_c4('acc-guide')" class="w-full flex items-center justify-between p-4 bg-indigo-900 hover:bg-indigo-800 transition-colors text-left group">
                        <div class="flex items-center gap-4"><div class="bg-indigo-800 text-yellow-400 border border-indigo-700 p-2 rounded-lg"><i class="ph ph-book-open-text text-xl"></i></div><div><h3 class="font-bold text-white">Archetype Mastery Guide</h3><p class="text-xs text-indigo-200 uppercase tracking-wide font-semibold">Deep Dive into Emotional Energy</p></div></div><i id="icon-acc-guide" class="ph ph-caret-down text-indigo-300 group-hover:text-white transition-transform duration-300 text-lg"></i>
                    </button>
                    <div id="acc-guide" class="hidden border-t border-slate-100 p-6 bg-slate-50/50">
                         <div class="space-y-12">
                            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
                                <div class="bg-slate-50 border-b border-slate-100 p-6"><h4 class="text-xl md:text-2xl font-bold text-slate-800 flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3 font-serif-title"><span class="flex items-center gap-2 text-emerald-700"><i class="ph ph-wind"></i> TAMAS (INHALE)</span><i class="ph ph-arrows-left-right text-slate-300 rotate-90 md:rotate-0"></i><span class="flex items-center gap-2 text-orange-600"><i class="ph ph-fire"></i> RAJAS (EXHALE)</span></h4><p class="text-sm text-slate-500 font-bold uppercase tracking-wider mt-2">The Rhythm of Your Soul: Understanding the Breath of Action and Rest</p></div><div class="p-6 md:p-8 space-y-8 text-slate-700 text-sm leading-relaxed"><div><p class="mb-4">Life is not a straight line; it is a heartbeat. Just as your lungs must empty to fill again, your spirit moves between two profound states of being: <strong>Tamas</strong> (the inhale) and <strong>Rajas</strong> (the exhale). Understanding this rhythm is the key to quieting the mental clutter.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"><div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100"><h5 class="font-bold text-emerald-800 mb-2 flex items-center gap-2"><i class="ph ph-house-line"></i> Tamas: The Inward Breath</h5><p class="text-xs md:text-sm">Your internal sanctuary. It is the phase where you observe, feel, learn, and process. It is the engine room where emotions are created and your internal batteries are charged.</p></div><div class="bg-orange-50 p-5 rounded-xl border border-orange-100"><h5 class="font-bold text-orange-800 mb-2 flex items-center gap-2"><i class="ph ph-paper-plane-tilt"></i> Rajas: The Outward Breath</h5><p class="text-xs md:text-sm">Your external power. It is the phase where you move, create, achieve, and release. It is where you spend the energy you have gathered to impact the world around you.</p></div></div><p class="mt-4 italic text-slate-500">We often suffer not because we are broken, but because this delicate cycle of charging and releasing has fallen out of sync.</p></div><div class="border-l-4 border-orange-400 pl-6 py-2"><h5 class="text-lg font-bold text-orange-700 mb-1">Scenario 1: The Depleted Warrior</h5><p class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4">State: Rajas (Action) > Tamas (Recharge)</p><p class="mb-3"><strong class="text-slate-900">The Struggle:</strong> You feel like you are running a marathon with no finish line. You are constantly "doing"—solving problems, working hard, and trying to force outcomes—but you feel hollow inside. You are breathing out, but you have forgotten to breathe in.</p><p class="mb-3"><strong class="text-slate-900">The Psychology:</strong> In this scenario, your Utilization Rate (Rajas) is faster than your Production Rate (Tamas). You are demanding heavy outputs from a battery that hasn't had time to charge.</p><div class="bg-orange-50/50 p-4 rounded-lg border border-orange-100 my-4 space-y-2"><p><strong class="text-orange-800">The Symptoms:</strong> Chronic lethargy, "brain fog," or a sense of failure despite best efforts. Pushing the gas pedal, but the tank is empty.</p><p><strong class="text-orange-800">The Consequence:</strong> Operating on fumes leads to burnout. The failure here isn't a lack of skill; it is a lack of fuel.</p></div><p class="mb-4"><strong class="text-slate-900">The Healing Insight:</strong> You cannot pour from an empty cup. If you feel drained, it is a signal that your "action" phase has lasted too long. You do not need to work harder; you need to stop. You must retreat into the Tamas state for introspection. Allow yourself to be passive so you can become powerful again.</p><div class="bg-slate-800 text-white p-4 rounded-xl shadow-sm text-center"><i class="ph ph-quotes text-orange-400 text-2xl mb-2 block"></i><p class="font-serif-title italic text-lg">"I give myself permission to pause. Rest is not the opposite of work; it is the fuel for it."</p></div></div><div class="border-l-4 border-emerald-400 pl-6 py-2"><h5 class="text-lg font-bold text-emerald-700 mb-1">Scenario 2: The Overwhelmed Vessel</h5><p class="text-xs font-bold text-slate-400 uppercase tracking-wide mb-4">State: Tamas (Recharge) > Rajas (Action)</p><p class="mb-3"><strong class="text-slate-900">The Struggle:</strong> You feel intense pressure inside your chest or mind. You are filled with ideas, heavy emotions, or nervous energy, but you feel "stuck." You are observing and feeling everything deeply, but you cannot seem to move forward. You are breathing in, but you cannot breathe out.</p><p class="mb-3"><strong class="text-slate-900">The Psychology:</strong> Your Production Rate (Tamas) is faster than your Utilization Rate (Rajas). You are generating massive amounts of emotional and mental energy, but you lack a healthy outlet to release it.</p><div class="bg-emerald-50/50 p-4 rounded-lg border border-emerald-100 my-4 space-y-2"><p><strong class="text-emerald-800">The Symptoms:</strong> Anxiety, overthinking, or impulsive behavior. Because energy must go somewhere, if you don't release it voluntarily, it will force its way out.</p><p><strong class="text-emerald-800">The Consequence:</strong> When the battery is overcharged and the Rajas connection is weak, you may find yourself acting against your own will just to relieve pressure. It is a flood rather than a flow.</p></div><p class="mb-4"><strong class="text-slate-900">The Healing Insight:</strong> You are not lazy; you are congested. You possess a surplus of power that needs a channel. Your recovery lies in movement. You must find small, manageable ways to "discharge" this energy—be it through writing, physical exercise, or a difficult conversation. You must open the gates before the dam breaks.</p><div class="bg-slate-800 text-white p-4 rounded-xl shadow-sm text-center"><i class="ph ph-quotes text-emerald-400 text-2xl mb-2 block"></i><p class="font-serif-title italic text-lg">"I release what I hold. My emotions are energy, and I choose to direct them into positive action."</p></div></div><div class="bg-indigo-50 border border-indigo-100 rounded-xl p-6 text-center"><h5 class="text-indigo-900 font-bold mb-2">The Balance</h5><p class="text-indigo-800">Your mental peace relies on honoring both sides of this cycle. When you are full of emotion, let Rajas motivate you to act and release it. When you are empty and tired, let Tamas invite you to rest and recharge. Do not fight the rhythm. Just breathe.</p></div></div></div>
                            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"><div class="bg-slate-50 border-b border-slate-100 p-6"><h4 class="text-xl md:text-2xl font-bold text-slate-800 flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3 font-serif-title"><span class="flex items-center gap-2 text-emerald-700"><i class="ph ph-binoculars"></i> SEEKER OF TRUTH</span><i class="ph ph-arrow-right text-slate-300 rotate-90 md:rotate-0"></i><span class="flex items-center gap-2 text-orange-600"><i class="ph ph-paint-brush-broad"></i> CREATOR</span></h4><p class="text-sm text-slate-500 font-bold uppercase tracking-wider mt-2">From Chaos to Creation: Turning Overthinking into Something Real</p></div><div class="p-6 md:p-8 space-y-8 text-slate-700 text-sm leading-relaxed"><div><h5 class="text-base font-bold text-slate-900 mb-2">What This Really Means</h5><p>When your mind is full of thoughts, "what ifs," worries, and ideas, it often feels like a storm. You are not lazy or broken – you are overloaded.</p><p class="mt-2">Inside you, there are two important parts:</p><ul class="list-disc pl-5 mt-2 space-y-1"><li><strong>The Seeker:</strong> The part of you that observes, feels deeply, and tries to understand life.</li><li><strong>The Creator:</strong> The part of you that turns ideas and emotions into real, physical things.</li></ul><p class="mt-2 font-medium text-indigo-700">You suffer most when the Seeker is active, but the Creator is silent.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100"><h5 class="font-bold text-emerald-800 mb-3 flex items-center gap-2"><i class="ph ph-eye"></i> The Seeker: The Inner Student</h5><p class="mb-2">The Seeker notices small details, thinks deeply about why things happen, replays conversations, and feels emotions intensely. You may ask:</p><ul class="list-disc pl-5 italic text-emerald-700/80"><li>“Why do I always end up in this situation?”</li><li>“Why do people behave like this?”</li><li>“Why do I feel this way?”</li></ul><p class="mt-3 text-xs font-bold text-emerald-800">This is the Seeker at work.</p></div><div class="bg-orange-50 p-5 rounded-xl border border-orange-100"><h5 class="font-bold text-orange-800 mb-3 flex items-center gap-2"><i class="ph ph-hammer"></i> The Creator: Giving Thoughts a Home</h5><p class="mb-2">The Creator says: “Enough thinking. Let’s build something.” It turns pain into projects and ideas into reality.</p><p class="mb-2">This looks like writing insights, building a product, designing a routine, or making something physical.</p><p class="mt-3 text-xs font-bold text-orange-800 italic">The Creator doesn’t ask, “What if?” The Creator says, “What can I make with what I have right now?”</p></div></div><div class="bg-slate-50 p-6 rounded-xl border-l-4 border-indigo-500"><h5 class="font-bold text-slate-900 mb-2">Example Story: The Silent Observer</h5><p class="italic text-slate-600 mb-4">Imagine Arjun. He spends nights replaying arguments, feeling like a CCTV camera—recording everything but doing nothing. He is the Seeker.</p><p>One day, instead of overthinking, he opens a notebook. He writes down lessons from his failed relationships. Over weeks, these notes turn into a "Red Flag Checklist" he shares with friends. By turning his pain into a tangible tool, he stops overthinking and starts building.</p><p class="font-bold text-indigo-700 mt-2">This is how overthinking becomes a tool instead of torture.</p></div><div><h5 class="text-base font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Practical Step-by-Step Plan: From Seeker to Creator</h5><div class="space-y-4"><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">1</div><div><strong class="block text-slate-800">Collect Your “Raw Data”</strong><p>Write down major painful events, repeat patterns, and recurring thoughts from the last 2-5 years. <span class="block text-xs mt-1 text-slate-500"><strong class="text-rose-500">Obstacle:</strong> Feeling overwhelmed. <strong class="text-emerald-600">Solution:</strong> Start with just one situation.</span></p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">2</div><div><strong class="block text-slate-800">Extract Lessons</strong><p>Ask: What did this teach me about myself and others? Focus on "Next time, I will..." rather than "I should have...".</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">3</div><div><strong class="block text-slate-800">Decide What to Create</strong><p>Build something from these lessons: A journal template, a checklist, a blog, a routine. <span class="block text-xs mt-1 text-slate-500"><strong class="text-rose-500">Obstacle:</strong> “Who will care?” <strong class="text-emerald-600">Solution:</strong> You are building for clarity, not fame.</span></p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">4</div><div><strong class="block text-slate-800">Use Creation as Your Anchor</strong><p>Whenever your mind becomes noisy, return to your project. Add one page, one idea. Let your hands move instead of your thoughts running wild.</p></div></div></div></div></div></div>
                            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"><div class="bg-slate-50 border-b border-slate-100 p-6"><h4 class="text-xl md:text-2xl font-bold text-slate-800 flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3 font-serif-title"><span class="flex items-center gap-2 text-emerald-700"><i class="ph ph-hand-heart"></i> COMPANION</span><i class="ph ph-arrow-right text-slate-300 rotate-90 md:rotate-0"></i><span class="flex items-center gap-2 text-orange-600"><i class="ph ph-storefront"></i> SELLER</span></h4><p class="text-sm text-slate-500 font-bold uppercase tracking-wider mt-2">The Art of Connection: Healing Yourself by Supporting Others</p></div><div class="p-6 md:p-8 space-y-8 text-slate-700 text-sm leading-relaxed"><div><h5 class="text-base font-bold text-slate-900 mb-2">What This Really Means</h5><p>Some people heal best when they focus on others. Inside you are two aspects:</p><ul class="list-disc pl-5 mt-2 space-y-1"><li><strong>The Companion (Nurturer):</strong> Wants to comfort, listen, and be there for others.</li><li><strong>The Seller (Charmer):</strong> Naturally influences, inspires, and uplifts people through words and presence.</li></ul><p class="mt-2 font-medium text-indigo-700">You suffer when you try to be invisible or shut down your ability to connect.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100"><h5 class="font-bold text-emerald-800 mb-3 flex items-center gap-2"><i class="ph ph-heart"></i> The Companion</h5><p class="mb-2">Listens without judgment and feels others' pain. You are the one friends call when hurting. But if you stop here, you may feel drained and unseen, like an "Invisible Healer."</p></div><div class="bg-orange-50 p-5 rounded-xl border border-orange-100"><h5 class="font-bold text-orange-800 mb-3 flex items-center gap-2"><i class="ph ph-microphone-stage"></i> The Seller (Leader)</h5><p class="mb-2">This is not commercial sales. It means you "sell" hope, comfort, and clarity. Your tools are your voice, presence, and intentional dressing. You transform complex feelings into soothing communication.</p></div></div><div class="bg-indigo-50/50 p-6 rounded-xl border border-indigo-100"><h5 class="font-bold text-indigo-900 mb-2">The King of Hearts: Leading with Love</h5><p>When Companion and Seller merge, people trust you deeply. You become a natural leader not by force, but by heart. This shows up as a mentor, community builder, or trusted guide.</p><p class="mt-2 font-bold text-rose-700"><i class="ph ph-warning"></i> Responsibility: Never manipulate. Use your influence only for honesty and well-being.</p></div><div><h5 class="text-base font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Step-by-Step Plan: From Nurturer to Leader</h5><div class="space-y-4"><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">1</div><div><strong class="block text-slate-800">Acknowledge Your Power</strong><p>Notice who comes to you for help and how they feel better around you. Don't dismiss this; it is a strength.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">2</div><div><strong class="block text-slate-800">Set Emotional Boundaries</strong><p>Learn to say, "I care, but I need rest." A burned-out Companion helps no one.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">3</div><div><strong class="block text-slate-800">Use Appearance Intentionally</strong><p>Dress to communicate safety and trust. You are dressing to support your role as a calm, reliable presence.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">4</div><div><strong class="block text-slate-800">Start Sharing Perspective</strong><p>Don't just listen; share gentle insights. "Maybe you need rest, not effort." Speaking up increases your positive impact.</p></div></div></div></div></div></div>
                            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"><div class="bg-slate-50 border-b border-slate-100 p-6"><h4 class="text-xl md:text-2xl font-bold text-slate-800 flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3 font-serif-title"><span class="flex items-center gap-2 text-emerald-700"><i class="ph ph-fist"></i> CHALLENGER</span><i class="ph ph-arrow-right text-slate-300 rotate-90 md:rotate-0"></i><span class="flex items-center gap-2 text-orange-600"><i class="ph ph-sword"></i> WARRIOR</span></h4><p class="text-sm text-slate-500 font-bold uppercase tracking-wider mt-2">The Fire of Transformation: From Victim to Victor</p></div><div class="p-6 md:p-8 space-y-8 text-slate-700 text-sm leading-relaxed"><div><h5 class="text-base font-bold text-slate-900 mb-2">What This Really Means</h5><p>Some people cannot stay calm when things are wrong. Inside you are two forces:</p><ul class="list-disc pl-5 mt-2 space-y-1"><li><strong>The Challenger (Catalyst):</strong> Points out what is wrong and refuses to tolerate injustice.</li><li><strong>The Warrior (Protector):</strong> Takes strong action to fix or defend.</li></ul><p class="mt-2 font-medium text-indigo-700">You suffer when you see what is wrong but do nothing, turning that fire inward into frustration.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100"><h5 class="font-bold text-emerald-800 mb-3 flex items-center gap-2"><i class="ph ph-warning-circle"></i> The Challenger</h5><p class="mb-2">Notices unfairness, lies, and inefficiency. You aren't "negative"; you are sensitive to standards. But without action, you become the "Silent Volcano"—always irritated but powerless.</p></div><div class="bg-orange-50 p-5 rounded-xl border border-orange-100"><h5 class="font-bold text-orange-800 mb-3 flex items-center gap-2"><i class="ph ph-shield-check"></i> The Warrior</h5><p class="mb-2">Moves when others freeze. Protects people and principles. Driven by "Do or Die" energy. You are here to be brave when others are scared, taking bold decisions.</p></div></div><div class="bg-slate-50 p-6 rounded-xl border-l-4 border-rose-500"><h5 class="font-bold text-slate-900 mb-2">The Synergy: Turning Fire into Purpose</h5><p>When you feel angry or restless, it means your inner Challenger sees a problem, but your Warrior is locked up. The cure is not to suppress anger but to direct it.</p><p class="font-bold text-slate-800 mt-2">Ask: "What exactly is wrong? And what is within my power to fix?"</p></div><div><h5 class="text-base font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Step-by-Step Plan: Constructive Power</h5><div class="space-y-4"><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">1</div><div><strong class="block text-slate-800">Name Your Anger</strong><p>Write down what irritates you. See anger as a signal of your values, not a sin.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">2</div><div><strong class="block text-slate-800">Control What You Can</strong><p>Separate what you can change from what you cannot. Focus on your own boundaries and standards.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">3</div><div><strong class="block text-slate-800">Choose a Battle Worth Fighting</strong><p>Don't waste energy on petty arguments. Direct it toward protecting the vulnerable or fixing a broken system.</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">4</div><div><strong class="block text-slate-800">Train Discipline</strong><p>Physical training channels aggression. The Warrior is about controlled power, not exploding rage.</p></div></div></div></div></div></div>
                            <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden"><div class="bg-slate-50 border-b border-slate-100 p-6"><h4 class="text-xl md:text-2xl font-bold text-slate-800 flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-3 font-serif-title"><span class="flex items-center gap-2 text-emerald-700"><i class="ph ph-recycle"></i> THOUGHTS OF DEATH</span><i class="ph ph-arrow-right text-slate-300 rotate-90 md:rotate-0"></i><span class="flex items-center gap-2 text-orange-600"><i class="ph ph-strategy"></i> STRATEGIST</span></h4><p class="text-sm text-slate-500 font-bold uppercase tracking-wider mt-2">From Fear of Loss to Strategic Survival: Turning Anxiety into a Plan</p></div><div class="p-6 md:p-8 space-y-8 text-slate-700 text-sm leading-relaxed"><div><h5 class="text-base font-bold text-slate-900 mb-2">What This Really Means</h5><p>When your mind is constantly predicting failure, imagining how things will die, or obsessing over safety, it feels like torture. You are not pessimistic or “negative” – you are scanning for survival.</p><p class="mt-2">Inside you, there are two important parts:</p><ul class="list-disc pl-5 mt-2 space-y-1"><li><strong>The Sentry (Thoughts of Death):</strong> The part of you that investigates threats, fears losing happiness, and obsessively researches how things could go wrong.</li><li><strong>The Strategist:</strong> The part of you that takes that fear and designs a way to survive, recover, and rise from the ashes.</li></ul><p class="mt-2 font-medium text-indigo-700">You suffer most when the Sentry is screaming about danger, but the Strategist has not been given a clear mission to solve it.</p></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-emerald-50 p-5 rounded-xl border border-emerald-100"><h5 class="font-bold text-emerald-800 mb-3 flex items-center gap-2"><i class="ph ph-shield-warning"></i> The Sentry: Guardian of "What Could Go Wrong"</h5><p class="mb-2">The Sentry is the version of you who:</p><ul class="list-disc pl-5 italic text-emerald-700/80 space-y-1"><li>Scans the environment deep below the surface to find weak spots.</li><li>Feels terror when happiness arrives, asking "When will I lose this?"</li><li>Refuses to invest time or money until safety is guaranteed.</li><li>Investigates dark secrets to ensure nothing surprises you.</li></ul><p class="mt-3 text-xs font-bold text-emerald-800">It isn't trying to hurt you; it is trying to keep you safe by predicting death before it happens.</p></div><div class="bg-orange-50 p-5 rounded-xl border border-orange-100"><h5 class="font-bold text-orange-800 mb-3 flex items-center gap-2"><i class="ph ph-compass"></i> The Strategist: Architect of Survival</h5><p class="mb-2">The Strategist says:</p><ul class="list-disc pl-5 italic text-orange-700/80 space-y-1"><li>“I see the risk. Now, let’s build a bridge over it.”</li><li>“If this fails, here is exactly how we will recover.”</li><li>“Let’s find the loophole to survive this chaos.”</li></ul><p class="mt-3 text-xs font-bold text-orange-800">The Strategist says: “I know how things die, so here is the design to make sure I survive.”</p></div></div><div class="bg-slate-50 p-6 rounded-xl border-l-4 border-indigo-500"><h5 class="font-bold text-slate-900 mb-2">Example Story: The Paralyzed Investigator</h5><p class="italic text-slate-600 mb-4">Priya has a stable job but is terrified of poverty. She reads about economic collapses and worries one mistake will ruin her life. She has all the information about "how things die," but no plan on how to live. She is the Sentry without the Strategist.</p><h5 class="font-bold text-indigo-700 mb-2 text-xs uppercase tracking-wide">Turning Panic into a Plan</h5><p>Priya activates her inner Strategist. She says: "Okay, the fear is real. Total financial loss is the 'Death' I fear."</p><ul class="list-disc pl-5 mt-2 space-y-1"><li>She diversifies savings (Risk Management).</li><li>She learns a secondary skill (Survival Tactic).</li><li>She creates a strict budget (The Path).</li></ul><p class="mt-2 font-bold text-indigo-800">The fear is still there, but it is no longer paralyzing. It has become fuel for strategy.</p></div><div class="bg-indigo-50/50 p-6 rounded-xl border border-indigo-100"><h5 class="font-bold text-indigo-900 mb-2">The Method: Fear + Coordinates = Strategy</h5><p>Fear without a plan is anxiety. Fear with a plan is strategy. To heal:</p><ul class="list-disc pl-5 mt-2 space-y-1"><li><strong>Acknowledge the Fear (Sentry):</strong> Let your mind show you the worst-case scenario.</li><li><strong>Define the Path (Strategist):</strong> Connect your current reality to a specific outcome of safety.</li></ul><p class="mt-3 font-bold text-center text-lg text-indigo-900 font-serif-title">“Do not just stare at the fire – build the exit.”</p></div><div><h5 class="text-base font-bold text-slate-900 mb-4 border-b border-slate-100 pb-2">Practical Step-by-Step Plan: From Sentry to Strategist</h5><div class="space-y-6"><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">1</div><div class="w-full"><strong class="block text-slate-800">Let the Sentry Speak (Define the Death)</strong><p>Write down the exact "Death" or "Failure" you are afraid of (Losing job? Breakup? Failure?). Let your mind list every way it could go wrong.</p><div class="mt-2 text-xs bg-rose-50 border border-rose-100 p-2 rounded text-rose-800"><strong>Obstacle:</strong> Overwhelmed by negativity. <br><strong>Solution:</strong> Remind yourself: "I am gathering data for the Strategist. I need to know the risks to defeat them."</div></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">2</div><div class="w-full"><strong class="block text-slate-800">Define Your Physical Coordinates</strong><p>The Strategist needs a map. Define two points clearly:</p><ul class="list-disc pl-5 mt-1 text-slate-600"><li><strong>START:</strong> Where are you right now? (e.g., "$500 in bank", "Just fired")</li><li><strong>END:</strong> What does survival look like? (e.g., "Survive 6 months", "Find new job")</li></ul><div class="mt-2 text-xs bg-slate-100 border border-slate-200 p-2 rounded text-slate-600"><strong>Obstacle:</strong> Vague goals like "I want to be happy." <br><strong>Solution:</strong> Make it physical and tangible.</div></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">3</div><div class="w-full"><strong class="block text-slate-800">Find the Loophole or the Path</strong><p>Ask: "Given these constraints, what is the most efficient way to get from START to END?" Look for the "hack" or simple way out (cutting losses, asking for help, changing the goal).</p></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">4</div><div class="w-full"><strong class="block text-slate-800">Execute to Survive</strong><p>Pick one action that increases safety immediately. Make the call. Sell the asset. Sign the paper.</p><div class="mt-2 text-xs bg-emerald-50 border border-emerald-100 p-2 rounded text-emerald-800"><strong>Solution:</strong> Don't wait for "perfectly safe." Aim for "Safe Enough to Move."</div></div></div><div class="flex gap-3"><div class="flex-shrink-0 w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center font-bold text-xs">5</div><div class="w-full"><strong class="block text-slate-800">Use Fear as Fuel</strong><p>When "Thoughts of Death" return, ask: "What new risk have you found?" Then ask the Strategist: "How do we mitigate this?" You become a Grandmaster playing a game you know how to win.</p></div></div></div></div></div></div>
                            <div class="bg-indigo-900 text-white rounded-2xl p-8 text-center shadow-lg"><h4 class="text-2xl font-bold font-serif-title mb-4">Putting It All Together</h4><p class="text-indigo-200 text-sm max-w-2xl mx-auto mb-6">You do not need to force yourself into only one role. Think of them as tools in your inner toolbox. You are a Seeker learning, a Creator building, a Companion healing, and a Strategist designing your path.</p><div class="inline-block bg-white/10 border border-white/20 rounded-xl p-4 text-sm font-medium"><p class="mb-2">Your next move is simple:</p><ol class="list-decimal list-inside text-left space-y-1 text-indigo-100"><li>Pick one area of life that feels stuck.</li><li>Identify which inner role needs to step forward.</li><li>Take one small, concrete action today.</li></ol></div><p class="mt-6 text-xs text-indigo-300 uppercase tracking-widest font-bold">Clarity comes when thought, emotion, and action move together.</p></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>function _c1(e){e.stopPropagation();const d=document.getElementById('contactDropdown');if(d.classList.contains('show')){d.classList.remove('show');_cAi();}else{d.classList.add('show');}}function _c2(e,i){if(e.target.closest('.action-btn'))return;e.stopPropagation();const t=document.getElementById(i);const x=t.classList.contains('expanded');_cAi();if(!x)t.classList.add('expanded');}function _cAi(){document.querySelectorAll('.contact-item').forEach(e=>e.classList.remove('expanded'));}function _c3(e,t){e.stopPropagation();const b=e.currentTarget;const f=()=>{const a=document.createElement("textarea");a.value=t;a.style.position='fixed';a.style.left='-9999px';document.body.appendChild(a);a.select();try{document.execCommand('copy');_sCp(b);}catch(r){console.error(r);}document.body.removeChild(a);};if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(t).then(()=>_sCp(b)).catch(r=>{f();});}else{f();}}function _sCp(b){const s=b.querySelector('span');const o=s.textContent;s.textContent="Copied!";b.classList.add('bg-green-100','text-green-700');setTimeout(()=>{s.textContent=o;b.classList.remove('bg-green-100','text-green-700');},2000);}document.addEventListener('click',e=>{const d=document.getElementById('contactDropdown');const b=document.getElementById('helpBtn');if(d&&d.classList.contains('show')&&!d.contains(e.target)&&!b.contains(e.target)){d.classList.remove('show');_cAi();}});const ACC_IDS=['acc-psycho','acc-energy','acc-speed','acc-ppf','acc-sun','acc-moon','acc-guide'];function _c4(id){ACC_IDS.forEach(a=>{const e=document.getElementById(a),i=document.getElementById('icon-'+a),t=e.previousElementSibling;if(a===id){e.classList.toggle('hidden');const o=!e.classList.contains('hidden');i.style.transform=o?'rotate(180deg)':'rotate(0deg)';if(o){setTimeout(()=>{const y=t.getBoundingClientRect().top+window.scrollY-90;window.scrollTo({top:y,behavior:'smooth'});},300);}}else{e.classList.add('hidden');if(i)i.style.transform='rotate(0deg)';}});}function _pSel(id,s,e,f){const el=document.getElementById(id);el.innerHTML='';for(let i=s;i<=e;i++){const o=document.createElement('option');o.value=i;o.text=f?f(i):i;el.appendChild(o);}}const _db=(f,d)=>{let t;return(...a)=>{clearTimeout(t);t=setTimeout(()=>f(...a),d);};};function _pad(n){return n.toString().padStart(2,'0');}function _dm(d){let m=Math.round((d-Math.floor(d))*60);if(m===60){d++;m=0;}return`${Math.floor(d)}° ${_pad(m)}'`;}function _nrm(d){d=d%360;if(d<0)d+=360;return d;}function _tR(d){return d*(Math.PI/180);}function _tD(r){return r*(180/Math.PI);}function _nR(n){let r=n%12;return r===0?12:r;}function _fDf(d){return`${_pad(d.getDate())} ${d.toLocaleString('en-GB',{month:'short'}).toUpperCase()} ${d.getFullYear().toString().slice(-2)}`;}function _fDm(d){return`${_pad(d.getDate())} ${d.toLocaleString('en-GB',{month:'short'}).toUpperCase()} @ ${d.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true})}`;}const BD=[{name:'Sun',type:'Planet',icon:'ph-sun',symbol:'Su'},{name:'Moon',type:'Planet',icon:'ph-moon',symbol:'Mo'},{name:'Mars',type:'Planet',icon:'ph-fire',symbol:'Ma'},{name:'Mercury',type:'Planet',icon:'ph-chat-circle-dots',symbol:'Me'},{name:'Jupiter',type:'Planet',icon:'ph-lightning',symbol:'Ju'},{name:'Venus',type:'Planet',icon:'ph-heart',symbol:'Ve'},{name:'Saturn',type:'Planet',icon:'ph-hourglass',symbol:'Sa'},{name:'Rahu',type:'Node',icon:'ph-link',symbol:'Ra'},{name:'Ketu',type:'Node',icon:'ph-link-break',symbol:'Ke'}];const PS={'Ketu':1,'Venus':2,'Sun':3,'Moon':4,'Mars':5,'Rahu':6,'Jupiter':7,'Saturn':8,'Mercury':9};const RN=["Aries (Mesha)","Taurus (Vrishabha)","Gemini (Mithuna)","Cancer (Karka)","Leo (Simha)","Virgo (Kanya)","Libra (Tula)","Scorpio (Vrishchika)","Sagittarius (Dhanu)","Capricorn (Makara)","Aquarius (Kumbha)","Pisces (Meena)"];const NK=["Ashwini","Bharani","Krittika","Rohini","Mrigashirsha","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"];const OH=[{id:2,range:[0,45],label:"STRATEGIST",category:"RAJAS",color:"#e2e8f0",textColor:"#334155",sourceAction:"STRATEGIST action is activating",targetAction:"to do actions as STRATEGIST"},{id:3,range:[45,90],label:"SEEKER OF TRUTH",category:"TAMAS",color:"#cbd5e1",textColor:"#334155",sourceAction:"emotionally GUIDING environment is activating",targetAction:"to attract environment that will emotionally GUIDE"},{id:5,range:[90,135],label:"COMPANION",category:"TAMAS",color:"#e9d5ff",textColor:"#581c87",sourceAction:"emotionally SUPPORTING environment is activating",targetAction:"to attract environment that will emotionally SUPPORT"},{id:6,range:[135,180],label:"CHALLENGER",category:"TAMAS",color:"#d8b4fe",textColor:"#581c87",sourceAction:"emotionally CHALLENGING environment is activating",targetAction:"to attract environment that will emotionally CHALLENGE"},{id:8,range:[180,225],label:"THOUGHTS OF DEATH",category:"TAMAS",color:"#bbf7d0",textColor:"#14532d",sourceAction:"Thoughts of Death/Failure is activating",targetAction:"to attract environment that produces THOUGHTS of DEATH/FAILURE"},{id:9,range:[225,270],label:"CREATOR",category:"RAJAS",color:"#86efac",textColor:"#14532d",sourceAction:"CREATOR action is activating",targetAction:"to do actions as CREATOR"},{id:11,range:[270,315],label:"SELLER",category:"RAJAS",color:"#fecaca",textColor:"#7f1d1d",sourceAction:"SELLER action is activating",targetAction:"to do actions as SELLER"},{id:12,range:[315,360],label:"WARRIOR",category:"RAJAS",color:"#fca5a5",textColor:"#7f1d1d",sourceAction:"WARRIOR action is activating",targetAction:"to do actions as WARRIOR"}];const EP=[{rajas:9,tamas:3},{rajas:11,tamas:5},{rajas:12,tamas:6},{rajas:2,tamas:8}];const AR={2:{title:"THE STRATEGIST",icon:"ph-strategy",quote:"Fear is not the end. When effort yields no reward, do not need to push harder. You need a map.",definition:"The Strategist is the resilience that rises from chaos. You are the puzzle solver, transforming the fear of failure into a structured plan for survival. You analyze the wreckage to find invisible leverage points.",method:"Anchor the 'Start' and visualize the 'End.' Build the bridge between your chaotic present and a secure future. Stop panicking; engineer your escape and survive at any cost."},3:{title:"THE SEEKER",icon:"ph-binoculars",quote:"Truth is not found in comfort, but in the questions that disturb your sleep.",definition:"The Seeker represents the gathering of emotional intelligence and data. It is the phase of absorbing truth from the environment to guide future actions.",method:"Observe without judgment. Let the environment reveal its hidden patterns to you before you act. Listen more than you speak."},5:{title:"THE COMPANION",icon:"ph-hand-heart",quote:"We heal not by standing alone, but by letting others stand with us.",definition:"The Companion embodies the need for emotional support and connection. It is the battery charging phase where trust is built.",method:"Seek environments that nurture you. Allow yourself to receive support rather than constantly giving it. Connect with your tribe."},6:{title:"THE CHALLENGER",icon:"ph-fist",quote:"Growth lives in the friction between who you are and who you must become.",definition:"The Challenger brings necessary friction to test your readiness. It represents the emotional spark that precedes transformation.",method:"Do not shy away from conflict or difficulty. Use the challenge as fuel to ignite your warrior spirit. Stand your ground."},8:{title:"THOUGHTS of DEATH/FAILURE",icon:"ph-recycle",quote:"To be reborn, one must first be willing to let the old self die.",definition:"This archetype deals with the deepest fears and the concept of failure as a stepping stone. It is the crucible of profound change.",method:"Embrace the endings. Let go of what no longer serves you to make space for the new creation. Release the old."},9:{title:"THE CREATOR",icon:"ph-paint-brush-broad",quote:"When your mind feels like a storm of unorganized thoughts, you are not lost—you are gathering raw materials.",definition:"This archetype represents the transmutation of mental clutter into tangible reality. It is the dance between the Seeker (who absorbs data) and the Creator (who builds a home for it).",method:"Stop dissipating energy through words. Channel it into your hands. Write it down, build it, make it real. You are the manufacturer of your own peace."},11:{title:"THE SELLER",icon:"ph-storefront",quote:"You possess a unique duality—a power to heal yourself by healing those around you.",definition:"This path merges the nurturing energy of the Companion with the influential charm of the Seller. You transform from a friend into a 'King of Hearts'—a leader who rules by affection, selling hope, comfort, and ideals.",method:"Focus entirely on the comfort of others. By acting as a bridge and speaking with love, you become a beacon that guides others out of their clutter, thereby organizing your own emotions."},12:{title:"THE WARRIOR",icon:"ph-sword",quote:"When gentle diplomacy fails, the Warrior awakens to break the walls enclosing you.",definition:"This domain governs high-intensity transformation. It begins with the Challenger and culminates in the Warrior, who executes the necessary change with red-hot discipline.",method:"Align your dissatisfaction with action. Stop warring with yourself and direct that intensity outward to correct injustices. Your healing comes from urgency and fearless execution."}};const TH={RAJAS:{bg:"bg-[#fff7ed]",border:"border-orange-400",text:"text-orange-900",badge:"bg-orange-600",lightBg:"bg-orange-50",highlight:"text-orange-600",circleBg:"bg-orange-200",circleText:"text-orange-800",divider:"border-orange-200",ring:"ring-orange-400",strip:"bg-orange-500",sub:"RAJAS PHASE",icon:"text-orange-400"},TAMAS:{bg:"bg-[#ecfdf5]",border:"border-emerald-400",text:"text-emerald-900",badge:"bg-emerald-600",lightBg:"bg-emerald-50",highlight:"text-emerald-600",circleBg:"bg-emerald-200",circleText:"text-emerald-800",divider:"border-emerald-200",ring:"ring-emerald-400",strip:"bg-emerald-500",sub:"TAMAS PHASE",icon:"text-emerald-400"}};window.onload=function(){_pSel('day-input',1,31);const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];_pSel('month-input',0,11,i=>m[i]);const yl=document.getElementById('year-options');yl.innerHTML='';for(let i=1900;i<=2100;i++){const o=document.createElement('option');o.value=i;yl.appendChild(o);}_pSel('hour-input',1,12,i=>_pad(i));_pSel('minute-input',0,59,i=>_pad(i));document.getElementById('name-input').value="FBR Institute";document.getElementById('day-input').value="3";document.getElementById('month-input').value="6";document.getElementById('year-input').value="1986";document.getElementById('hour-input').value="3";document.getElementById('minute-input').value="50";_c5('PM');document.getElementById('location-input').value="Faridkot, Punjab, India";document.getElementById('latitude').value="30.6769";document.getElementById('longitude').value="74.7583";document.getElementById('lat-display').textContent="30.6769";document.getElementById('lng-display').textContent="74.7583";};function _c5(v){document.getElementById('ampm-value').value=v;const a=document.getElementById('btn-am'),p=document.getElementById('btn-pm');a.className=`ampm-btn flex-1 rounded text-[10px] font-bold py-1 text-slate-500 transition-colors ${v==='AM'?'active':''}`;p.className=`ampm-btn flex-1 rounded text-[10px] font-bold py-1 text-slate-500 transition-colors ${v==='PM'?'active':''}`;}const si=document.getElementById('location-input'),sl=document.getElementById('suggestions'),sp=document.getElementById('loading-spinner'),cb=document.getElementById('clear-btn');si.addEventListener('input',_db((e)=>_fLoc(e.target.value),400));document.addEventListener('click',(e)=>{if(!si.contains(e.target)&&!sl.contains(e.target))sl.classList.add('hidden');});cb.addEventListener('click',()=>{si.value='';sl.classList.add('hidden');cb.classList.add('hidden');});async function _fLoc(q){if(!q||q.length<3){sl.classList.add('hidden');return;}sp.classList.remove('hidden');cb.classList.add('hidden');try{const r=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(q)}&limit=5&addressdetails=1`);_rSug(await r.json());}catch(e){console.error(e);}finally{sp.classList.add('hidden');cb.classList.remove('hidden');}}function _rSug(d){sl.innerHTML='';if(!d.length){sl.classList.add('hidden');return;}d.forEach(p=>{const l=document.createElement('li');l.className="px-4 py-3 hover:bg-indigo-50 cursor-pointer border-b border-slate-100 last:border-0 flex flex-col";l.innerHTML=`<span class="font-semibold text-slate-700 text-sm">${p.display_name.split(',')[0]}</span><span class="text-xs text-slate-500 truncate">${p.display_name}</span>`;l.onclick=()=>{document.getElementById('latitude').value=parseFloat(p.lat).toFixed(4);document.getElementById('longitude').value=parseFloat(p.lon).toFixed(4);document.getElementById('lat-display').textContent=parseFloat(p.lat).toFixed(4);document.getElementById('lng-display').textContent=parseFloat(p.lon).toFixed(4);si.value=p.display_name;sl.classList.add('hidden');};sl.appendChild(l);});sl.classList.remove('hidden');}function _c6(){const v=['day-input','month-input','year-input','hour-input','minute-input'].map(i=>parseInt(document.getElementById(i).value));if(!v[0]||isNaN(v[1])||!v[2]){alert("Please enter a valid date.");return;}let h=v[3];const ap=document.getElementById('ampm-value').value;if(ap==='PM'&&h<12)h+=12;if(ap==='AM'&&h===12)h=0;const bd=new Date(v[2],v[1],v[0],h,v[4]);const lat=parseFloat(document.getElementById('latitude').value),lon=parseFloat(document.getElementById('longitude').value);const nm=(document.getElementById('name-input').value||"Unknown").toUpperCase();const lc=document.getElementById('location-input').value||"Unknown Location";const dp=`${_pad(bd.getDate())} ${bd.toLocaleString('en-GB',{month:'short'}).toUpperCase()} ${bd.getFullYear()}`;const tp=bd.toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true});const dStr=`(${nm} @ ${dp} @ ${tp} @ ${lc})`;['octal-map-details','psycho-details','energy-details','speed-details','long-cycle-details','monthly-details','daily-details'].forEach(i=>{const e=document.getElementById(i);if(e)e.textContent=dStr;});const days=(bd-new Date('2000-01-01T12:00:00Z'))/86400000;const T=days/36525.0,lah=23.858832+(1.396042*T);const obl=_tR(23.4392911-(0.0130042*T)),gmst=Astronomy.SiderealTime(bd);const lRad=_tR(_nrm((gmst*15)+lon)),laRad=_tR(lat);const asT=_nrm(_tD(Math.atan2(Math.cos(lRad),-((Math.sin(lRad)*Math.cos(obl))+(Math.tan(laRad)*Math.sin(obl))))));const asS=_nrm(asT-lah);const lag={deg:asS,rashi:Math.floor(asS/30)+1};document.querySelector('#results-table tbody').innerHTML='';_rR("Ascendant",asS,"Ascendant","ph-arrow-fat-up","Lagna (Asc)","-",RN[lag.rashi-1],asS%30,NK[Math.floor(asS/13.333)],Math.floor((asS%13.333)/(13.333/4))+1);const rP=[],tP=[],pMap={},hList=[],pDat=[];BD.forEach(b=>{let tL;if(b.type==='Node'){let r=_nrm(125.04452-(1934.136261*T)+(0.0020708*T*T)+((T*T*T)/450000));tL=(b.name==='Rahu')?r:_nrm(r+180);}else{tL=Astronomy.Ecliptic(Astronomy.GeoVector(Astronomy.Body[b.name],Astronomy.MakeTime(bd),true)).elon+(0.013969*(days/365.25));}const sL=_nrm(tL-lah),d=_nrm(sL-asS);const hI=OH.find(h=>d>=h.range[0]&&d<h.range[1]);const hN=hI?hI.id:"Gap";if(hI){const pO={name:b.name,icon:b.icon,speed:PS[b.name]};(hI.category==="RAJAS"?rP:tP).push(pO);if(!hList[hN])hList[hN]=[];hList[hN].push(pO);}pMap[b.name]={symbol:b.symbol,house:hN,category:hI?.category,houseInfo:hI,icon:b.icon};pDat.push({symbol:b.symbol,deg:sL,distFromLagna:d});_rR(b.name,sL,b.type,b.icon,hI?.label||"-",hN,RN[Math.floor(sL/30)],sL%30,NK[Math.floor(sL/13.333)],Math.floor((sL%13.333)/(13.333/4))+1);});_dOc(lag,pDat);document.getElementById('results-container').classList.remove('hidden');_rAn(rP,tP);_rEf(pMap);_rEn(pMap);_rSs(hList);const now=new Date();_rLc(now,asS,pMap);_rSc(now,asS,pMap);_rMc(now,asS,pMap);}function _rR(n,s,t,i,hl,hn,r,dg,nk,pd){const tr=document.createElement('tr');tr.className="hover:bg-slate-50 transition border-b border-slate-100 last:border-0"+(t==='Node'?' node-row':t==='Ascendant'?' asc-row':'');tr.innerHTML=`<td class="flex items-center gap-2" style="padding: 6px 12px;"><div class="w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-slate-500"><i class="ph ${i||'ph-planet'} text-sm"></i></div><span class="font-bold text-xs">${n}</span></td><td>${(hl!=="-"&&hn!=="-")?`<span class="font-bold text-slate-900">${hl}</span> <span class="text-slate-900 font-bold">(${hn})</span>`:"-"}</td><td class="text-slate-700 font-medium">${r}</td><td class="font-mono text-slate-600">${_dm(dg)}</td><td><span class="font-medium text-slate-700">${nk}</span> <span class="text-[10px] text-slate-400 ml-1">P${pd}</span></td>`;document.querySelector('#results-table tbody').appendChild(tr);}function _rAn(r,t){const rh=r.length?r.map(p=>`<span class="inline-flex items-center gap-1 bg-white border border-orange-200 text-orange-700 px-2 py-1 rounded text-xs font-bold shadow-sm"><i class="ph ${p.icon}"></i> ${p.name}</span>`).join(''):`<span class="text-xs text-orange-300 italic">No planets</span>`;const th=t.length?t.map(p=>`<span class="inline-flex items-center gap-1 bg-white border border-emerald-200 text-emerald-700 px-2 py-1 rounded text-xs font-bold shadow-sm"><i class="ph ${p.icon}"></i> ${p.name}</span>`).join(''):`<span class="text-xs text-emerald-300 italic">No planets</span>`;document.getElementById('rajas-list').innerHTML=rh;document.getElementById('rajas-count').textContent=`${r.length} Planet${r.length!==1?'s':''}`;document.getElementById('tamas-list').innerHTML=th;document.getElementById('tamas-count').textContent=`${t.length} Planet${t.length!==1?'s':''}`;let s="";if(r.length>t.length){s=`<div class="space-y-3"><h4 class="text-orange-700 font-bold text-base flex items-center gap-2"><i class="ph ph-fire"></i> The Depleted Warrior (Active Phase)</h4><p class="text-slate-700 font-medium text-sm"><strong>State:</strong> Output > Input (Utilization Rate > Production Rate)</p><p class="text-slate-600 text-justify">The Depleted Warrior represents a state where your output exceeds your input. Psychologically, you are stuck in a cycle of constant "exhaling"—action, work, and effort—without taking the time to "inhale" or recharge. In this dynamic, the Utilization Rate (Rajas) is significantly faster than the Production Rate (Tamas).</p><p class="text-slate-600 text-justify">You are trying to draw power from an empty battery. Because the Tamas house (your emotional reservoir) is depleted, the Rajas house (your center of action) lacks the fuel to operate efficiently. This leads to chronic exhaustion, lethargy, and a feeling of "running on fumes." You may find yourself working harder but achieving less, increasing the likelihood of failure. <span class="text-indigo-700 font-bold">The core issue here is not a lack of motivation, but a lack of resources. To heal, you must stop forcing action and prioritize stillness to replenish your energy.</span></p></div>`;}else if(t.length>r.length){s=`<div class="space-y-3"><h4 class="text-emerald-700 font-bold text-base flex items-center gap-2"><i class="ph ph-waves"></i> The Overwhelmed Vessel (Recharge Phase)</h4><p class="text-slate-700 font-medium text-sm"><strong>State:</strong> Input > Output (Production Rate > Utilization Rate)</p><p class="text-slate-600 text-justify">The Overwhelmed Vessel represents a state of internal congestion. Psychologically, you are "inhaling" deeply—absorbing emotions, thoughts, and energy—but failing to "exhale" or release them through action. Here, the Production Rate (Tamas) is much faster than the Utilization Rate (Rajas).</p><p class="text-slate-600 text-justify">Your internal battery is overcharged. While having abundant energy sounds positive, without a proper outlet (Rajas), this surplus turns into intense pressure. This often manifests as anxiety, overthinking, or feeling paralyzed. If this energy is not voluntarily channeled into work or expression, it will eventually force its way out, leading to impulsive behavior or actions taken against your better judgment. <span class="text-indigo-700 font-bold">You are not tired; you are stuck. The remedy is not rest, but movement—finding a healthy channel to discharge this buildup and restore flow.</span></p></div>`;}else{s=`<div class="p-3 bg-indigo-50 border border-indigo-100 rounded-lg"><strong class="text-indigo-800">Balanced Energy:</strong> Equilibrium between gathering energy and releasing it. Your input and output rates are synchronized.</div>`;}document.getElementById('analysis-summary').innerHTML=s;}function _rEf(m){const sq=['Ketu','Venus','Sun','Moon','Mars','Rahu','Jupiter','Saturn','Mercury','Ketu'];let h=`<h3 class="text-sm font-bold text-slate-800 mb-3">Planetary Energy Flow Sequence</h3><div class="planet-flow-scroll flex items-center justify-between overflow-x-auto gap-1 pb-2">`;sq.forEach((pn,ix)=>{const d=m[pn],c=d.category,b=c==="RAJAS"?"bg-orange-400":c==="TAMAS"?"bg-emerald-400":"bg-slate-300";h+=`<div class="flex-shrink-0 flex flex-col items-center justify-center w-[36px] md:w-[45px] bg-slate-50 border border-slate-200 rounded shadow-sm p-1"><span class="text-[10px] md:text-[11px] font-bold text-slate-800 leading-tight">${d.symbol}</span><span class="text-xs md:text-[13px] font-bold text-indigo-900 leading-tight">${d.house}</span><div class="w-full h-1 rounded-full mt-1 ${b}"></div></div>`;if(ix<sq.length-1)h+=`<div class="flex-shrink-0 text-slate-400 flex items-center justify-center -mx-1"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 256 256"><path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg></div>`;});document.getElementById('energy-flow-container').innerHTML=h+`</div>`;}function _rEn(m){const sq=['Mercury','Ketu','Venus','Sun','Moon','Mars','Rahu','Jupiter','Saturn'],cn=document.getElementById('energy-narrative-container');cn.innerHTML='';sq.forEach((p,i)=>{const nx=i===sq.length-1?'Mercury':sq[i+1],cd=m[p],nd=m[nx];if(!cd?.houseInfo||!nd?.houseInfo)return;const th=TH[cd.houseInfo.category]||TH.TAMAS;cn.innerHTML+=`<div class="narrative-chip inline-flex items-center gap-2 px-3 py-1.5 rounded-full border ${th.lightBg} ${th.divider} shadow-sm text-xs cursor-default"><span class="font-bold text-slate-700">${p}</span><i class="ph ph-arrow-right ${th.icon}"></i><span class="${th.highlight} font-semibold">${cd.houseInfo.sourceAction}</span><i class="ph ph-caret-right text-black font-bold"></i><span class="font-bold text-slate-700">${nx}</span></div>`;});}function _rSs(l){const c=document.getElementById('energy-support-container'),r=[];c.innerHTML='';EP.forEach(pr=>{const rp=(l[pr.rajas]||[]).sort((a,b)=>b.speed-a.speed),tp=(l[pr.tamas]||[]).sort((a,b)=>b.speed-a.speed);const ri=OH.find(h=>h.id===pr.rajas),ti=OH.find(h=>h.id===pr.tamas);const rs=rp.length?rp[0].speed:0,ts=tp.length?tp[0].speed:0;let sc=0,sv=0;if(tp.length&&rp.length){if(ts<rs){sc=1;sv=4000+(rs*10)-ts;}else{sc=3;sv=2000+(10-ts);}}else if(tp.length){sc=2;sv=3000+(10-ts);}else if(rp.length){sc=4;sv=1000+rs;}else return;r.push({sc,sv,ri,ti,rp,tp});});if(!r.length){c.innerHTML=`<div class="col-span-2 text-center text-slate-400 py-8 italic bg-slate-50 rounded-xl border border-slate-100">No planetary pairs found.</div>`;return;}r.sort((a,b)=>b.sv-a.sv).forEach((d,i)=>{const ar=AR[d.ri.id],cl=i===0?'emerald':i===1?'orange':i===2?'rose':'slate';const mt={1:{t:"Fast Charging",i:"ph-battery-charging-vertical",d:"Internal battery charges rapidly, fueling actions with abundance. Rare stamina without burnout."},2:{t:"Forced Action",i:"ph-waves",d:"Energy building seeking release. Without direction, power finds way out through impulsive actions."},3:{t:"Slow Charging",i:"ph-battery-warning",d:"Spending energy faster than recovery. Draining battery quickly leading to fatigue."},4:{t:"Strained Action",i:"ph-fire",d:"Drive to act but unsupported by inner resources. Effort feels heavy, running on reserves."}}[d.sc];const ft=p=>(!p||!p.length)?'<span class="text-slate-300 italic text-[10px]">Empty</span>':p.map(x=>`<span class="inline-flex items-center gap-1 font-bold text-slate-800 bg-slate-100/50 px-1.5 py-0.5 rounded border border-slate-200/50 text-xs"><i class="ph ${x.icon} text-slate-500"></i> ${x.name}</span>`).join('');c.innerHTML+=`<div class="rounded-xl border border-slate-300 border-l-[6px] border-l-${cl}-500 shadow-md bg-white overflow-hidden flex flex-col hover:shadow-lg transition-shadow"><div class="p-3 border-b border-slate-100 flex justify-between items-center bg-slate-50/50"><div class="flex items-center gap-3"><div class="p-1.5 rounded-lg bg-white shadow-sm border border-slate-200 text-${cl}-500"><i class="ph ${mt.i} text-lg"></i></div><div><h4 class="text-sm font-bold text-slate-800 leading-tight">${mt.t}</h4><div class="text-[10px] font-bold text-slate-400 uppercase tracking-wide">${d.ti.label} <i class="ph ph-arrow-right text-[8px]"></i> ${d.ri.label}</div></div></div><span class="bg-${cl}-500 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider shadow-sm">Rank ${i+1}</span></div><div class="flex flex-col md:flex-row"><div class="md:w-5/12 p-4 flex flex-col gap-4 border-b md:border-b-0 md:border-r border-slate-100"><div class="flex items-center justify-between gap-2 text-xs bg-slate-50 p-2 rounded border border-slate-100"><div class="flex flex-col items-center w-1/2"><span class="text-[9px] font-bold text-emerald-600 uppercase mb-1">Support</span><div class="flex flex-wrap justify-center gap-1">${ft(d.tp)}</div></div><i class="ph ph-arrow-right text-slate-300"></i><div class="flex flex-col items-center w-1/2"><span class="text-[9px] font-bold text-orange-600 uppercase mb-1">Action</span><div class="flex flex-wrap justify-center gap-1">${ft(d.rp)}</div></div></div><p class="text-xs text-slate-700 font-medium leading-relaxed italic">"${mt.d}"</p></div><div class="md:w-7/12 p-4 bg-slate-50/30 flex flex-col justify-center"><div class="flex items-center gap-2 mb-3"><i class="ph ${ar.icon} text-slate-400 text-lg"></i><span class="text-sm font-bold text-slate-600 uppercase tracking-wider">${ar.title} Insight</span></div><div class="space-y-3"><p class="text-sm text-slate-700 leading-relaxed"><span class="font-bold text-slate-900">Definition:</span> ${ar.definition}</p><p class="text-sm text-slate-700 leading-relaxed"><span class="font-bold text-indigo-700">Method:</span> ${ar.method}</p></div></div></div></div>`;});}function _gTd(n,d,a){const T=(d-new Date('2000-01-01T12:00:00Z'))/86400000/36525.0;let tr,sp;if(['Rahu','Ketu'].includes(n)){let r=_nrm(125.04452-(1934.136261*T)+(0.0020708*T*T)+((T*T*T)/450000));tr=n==='Rahu'?r:_nrm(r+180);sp=-0.05295;}else{const v=Astronomy.GeoVector(Astronomy.Body[n],Astronomy.MakeTime(d),true);tr=Astronomy.Ecliptic(v).elon;const pr=Astronomy.Ecliptic(Astronomy.GeoVector(Astronomy.Body[n],Astronomy.MakeTime(new Date(d.getTime()-3600000)),true)).elon;sp=tr-pr;if(sp<-180)sp+=360;if(sp>180)sp-=360;}const dg=_nrm(_nrm(tr-(23.858832+(1.396042*T)))-a);return {house:OH.find(h=>dg>=h.range[0]&&dg<h.range[1])||OH[0],isRetro:sp<0};}function _fBd(n,s,a,d,st){let c=new Date(s),hi=_gTd(n,c,a).house.id,step=0;while(step++<10000){const nx=new Date(c.getTime()+(d*st*3600000));if(_gTd(n,nx,a).house.id!==hi){let l=d===1?c:nx,u=d===1?nx:c;if(l>u)[l,u]=[u,l];let f=u,lh;for(let i=0;i<15;i++){let m=new Date((l.getTime()+u.getTime())/2),dt=_gTd(n,m,a);if(dt.house.id===hi){if(d===1)l=m;else u=m;}else{if(d===1)u=m;else l=m;lh=dt.house;f=m;}}return {date:f,newHouse:lh};}c=nx;}return null;}function _cSch(n,w,a,f,p){let s=24;if(n==='Moon')s=2;if(['Saturn','Jupiter','Rahu','Ketu'].includes(n))s=120;if(n==='Mars')s=48;const cd=_gTd(n,w,a),ex=_fBd(n,w,a,1,s)?.date||new Date(w.getTime()+2592000000),en=_fBd(n,w,a,-1,s)?.date||new Date(w.getTime()-2592000000);const sc=[{house:{...cd.house,label:cd.house.label+(cd.isRetro?" (R)":"")},entry:en,exit:ex,type:'Present'}];let le=ex;for(let i=0;i<f;i++){const rs=_fBd(n,new Date(le.getTime()+60000),a,1,s);if(rs){const md=_gTd(n,new Date((le.getTime()+rs.date.getTime())/2),a);sc.push({house:{...md.house,label:md.house.label+(md.isRetro?" (R)":"")},entry:le,exit:rs.date,type:'Future'});le=rs.date;}}let le2=en;for(let i=0;i<p;i++){const rs=_fBd(n,new Date(le2.getTime()-60000),a,-1,s);if(rs){const md=_gTd(n,new Date((le2.getTime()+rs.date.getTime())/2),a);sc.unshift({house:{...md.house,label:md.house.label+(md.isRetro?" (R)":"")},entry:rs.date,exit:le2,type:'Past'});le2=rs.date;}}return sc;}function _gDsc(h,p){const pr=`${p} is`;const m={3:"attracting environment to GUIDE",5:"attracting environment to SUPPORT",6:"attracting environment to CHALLENGE",8:"triggering THOUGHTS of DEATH/FAILURE",9:"triggering action as CREATOR",11:"triggering action as SELLER",12:"triggering action as WARRIOR",2:"triggering action as STRATEGIST"};return m[h]?`${pr} ${m[h]}`:"";}function _rLc(n,a,m){const c=document.getElementById('long-cycle-container');c.innerHTML='';['Mars','Jupiter','Saturn'].forEach(p=>{const d=_cSch(p,n,a,1,1),nh=m[p]?.houseInfo?.label||"Unknown";let h=`<div class="bg-white rounded-lg border border-slate-200 shadow-sm mb-6 p-1"><div class="flex items-center justify-between p-3 border-b border-slate-100 mb-2"><div class="flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-indigo-600"></span><span class="text-sm font-bold text-slate-800 uppercase">${p} Cycle</span></div><span class="bg-slate-100 text-slate-500 text-xs font-bold px-2 py-0.5 rounded-full">@Birth: ${nh}</span></div><div class="flex flex-col md:flex-row gap-2 p-2">`;d.forEach(i=>{if(!i)return;const t=TH[i.house.category]||TH.TAMAS,ar=AR[i.house.id];const st=i.type==='Present'?"opacity-100 ring-2 ring-offset-2 ring-indigo-500 shadow-md scale-[1.01] z-10":"opacity-80 grayscale-[30%] shadow-sm";const rd=_gDsc(i.house.id,p).replace(i.house.label,`<span class="font-bold ${t.highlight}">${i.house.label}</span>`);h+=`<div class="flex-1 rounded-lg border p-4 flex flex-col gap-4 transition-all ${t.bg} ${t.border} ${st}"><div class="flex justify-between items-start"><span class="px-2 py-0.5 rounded-full text-[10px] font-bold text-white uppercase ${t.badge}">${i.type}</span><span class="text-[10px] font-bold text-slate-500">${_fDf(i.entry)} - ${_fDf(i.exit)}</span></div><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${t.circleBg} ${t.circleText}">${i.house.id}</div><span class="text-sm font-bold text-slate-800 uppercase tracking-tight">${i.house.label}</span></div><div class="flex flex-col gap-3 mt-1"><p class="text-sm text-slate-800 leading-relaxed text-justify font-medium">${rd}</p><div class="pl-3 border-l-4 ${t.border} text-sm italic text-slate-700 leading-relaxed my-2 py-1">"${ar.quote}"</div><p class="text-sm text-slate-700 text-justify leading-relaxed pt-3 border-t ${t.divider} mt-auto"><strong class="text-slate-900">Guidance:</strong> ${ar.method}</p></div></div>`;});c.innerHTML+=h+`</div></div>`;});}function _rSc(n,a,m){const c=document.getElementById('sun-cycle-container'),nh=m['Sun']?.houseInfo?.label||"Unknown";c.innerHTML='';_cSch('Sun',n,a,8,0).forEach(i=>{const t=TH[i.house.category]||TH.TAMAS,ar=AR[i.house.id],isp=i.type==='Present';const cl=`bg-white rounded-lg border border-slate-200 overflow-hidden relative flex flex-col md:flex-row shadow-sm mb-4${isp?" ring-2 ring-indigo-500 z-10 shadow-md transform scale-[1.01]":""}`;c.innerHTML+=`<div class="${cl}">${isp?'<div class="absolute top-0 right-0 bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg z-20 shadow-sm">CURRENTLY ACTIVE</div>':''}<div class="w-3 ${t.strip} flex-shrink-0"></div><div class="flex-1 p-5 flex flex-col gap-4"><div class="flex flex-col md:flex-row md:items-center justify-between gap-3 border-b border-slate-100 pb-3"><div class="flex items-center gap-3"><div class="w-8 h-8 rounded-full ${t.lightBg} flex items-center justify-center font-bold text-sm ${t.highlight}">${i.house.id}</div><div><h4 class="font-bold text-slate-800 uppercase text-sm leading-none">${i.house.label} <span class="text-slate-400 font-normal text-[10px] ml-1">(@Birth: ${nh})</span></h4><span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">${t.sub}</span></div></div><div class="bg-indigo-50 border border-indigo-100 rounded px-2 py-1 text-[10px] font-bold font-mono text-indigo-700 text-center md:text-right">${_fDm(i.entry)} ➜ <br class="md:hidden"/> ${_fDm(i.exit)}</div></div><div class="flex flex-col gap-3"><div class="bg-slate-50 rounded p-3 text-sm font-medium text-slate-800 border border-slate-200"><span class="font-bold text-slate-900">Trigger:</span> ${_gDsc(i.house.id,'Sun')}</div><div class="pl-3 border-l-4 ${t.border} text-sm italic text-slate-700 leading-relaxed">"${ar.quote}"</div><p class="text-sm text-slate-700 text-justify leading-relaxed pt-2 border-t border-slate-100 mt-1"><strong class="text-slate-900">Guidance:</strong> ${ar.method}</p></div></div></div>`;});}function _rMc(n,a,m){const c=document.getElementById('moon-cycle-container'),nh=m['Moon']?.houseInfo?.label||"Unknown";c.innerHTML='';_cSch('Moon',n,a,5,2).forEach(i=>{const t=TH[i.house.category]||TH.TAMAS,isp=i.type==='Present';const st=isp?`opacity-100 ring-2 ${t.ring} shadow-md z-10`:"opacity-80 grayscale-[30%]";c.innerHTML+=`<div class="w-full rounded-lg border p-0 overflow-hidden flex flex-col md:flex-row ${t.lightBg} ${t.border} ${st} mb-3 transition-all"><div class="md:w-1/4 p-4 border-b md:border-b-0 md:border-r ${t.border} flex flex-row md:flex-col items-center md:items-start justify-between md:justify-center gap-2"><span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase bg-white border border-slate-200 text-slate-600 shadow-sm">${i.type.toUpperCase()}</span><div class="text-xs font-bold text-slate-500 font-mono flex flex-col items-end md:items-start leading-tight"><span>${_fDm(i.entry)}</span><span class="text-[9px] text-slate-400 lowercase italic">to</span><span>${_fDm(i.exit)}</span></div></div><div class="flex-1 p-4 flex flex-col gap-3"><div class="flex items-center gap-2"><div class="w-6 h-6 rounded-full bg-white border border-slate-200 flex items-center justify-center text-xs font-bold text-slate-700 shadow-sm">${i.house.id}</div><span class="text-xs font-bold text-slate-800 uppercase tracking-wide">${i.house.label} <span class="text-slate-400 font-normal text-[10px] ml-1">(@Birth: ${nh})</span></span></div><div class="bg-white/60 border border-black/5 rounded p-2 text-xs text-slate-700 font-medium">${_gDsc(i.house.id,'Moon')}</div><p class="text-sm text-slate-700 text-justify leading-relaxed">${AR[i.house.id].definition}</p></div></div>`;});}function _dOc(l,p){const w=550,h=550,cx=w/2,cy=h/2,r=180,lr=185,c=document.getElementById('octal-chart-container');p.forEach(x=>{let hs=OH.find(h=>x.distFromLagna>=h.range[0]&&x.distFromLagna<h.range[1])||OH[0];x.visualDist=hs.range[0]+7+((x.distFromLagna-hs.range[0])/(hs.range[1]-hs.range[0])*(hs.range[1]-hs.range[0]-14));});p.sort((a,b)=>a.visualDist-b.visualDist);const t=[60,105,150],oc=[[],[],[]],sw=14;p.forEach(x=>{let k=-1;for(let i=0;i<3;i++){const th=(sw*1.8)/(2*Math.PI*t[i])*360;if(!oc[i].some(a=>{let d=Math.abs(a-x.visualDist);return(d>180?360-d:d)<th;})){k=i;break;}}if(k===-1)k=2;x.radius=t[k];oc[k].push(x.visualDist);});let svg=`<svg viewBox="0 0 ${w} ${h}" class="w-full h-full bg-white rounded-full"><defs>`;OH.forEach(h=>{const s=_tR(-90-h.range[0]),e=_tR(-90-h.range[1]),x1=cx+lr*Math.cos(s),y1=cy+lr*Math.sin(s),x2=cx+lr*Math.cos(e),y2=cy+lr*Math.sin(e);const it=[2,3,11,12].includes(h.id);svg+=`<path id="arc-${h.id}" d="M ${it?x2:x1} ${it?y2:y1} A ${lr} ${lr} 0 0 ${it?1:0} ${it?x1:x2} ${it?y1:y2}" fill="none"/>`;});svg+=`</defs>`;OH.forEach(h=>{const s=_tR(-90-h.range[0]),e=_tR(-90-h.range[1]),x1=cx+r*Math.cos(s),y1=cy+r*Math.sin(s),x2=cx+r*Math.cos(e),y2=cy+r*Math.sin(e);svg+=`<path d="M ${cx} ${cy} L ${x1} ${y1} A ${r} ${r} 0 0 0 ${x2} ${y2} Z" fill="${h.color}" stroke="white" stroke-width="2"/><text class="curved-label" fill="${h.textColor}" dy="${[2,3,11,12].includes(h.id)?-5:12}" font-weight="bold"><textPath href="#arc-${h.id}" startOffset="50%" text-anchor="middle">${h.label} (${h.id})</textPath></text>`;});[{n:'E',a:0,r:0,c:"#ef4444"},{n:'N',a:90,r:3,c:"#3b82f6"},{n:'W',a:180,r:6,c:"#10b981"},{n:'S',a:270,r:9,c:"#f59e0b"}].forEach(o=>{const rd=_tR(-90-o.a),lx=cx+r*Math.cos(rd),ly=cy+r*Math.sin(rd),tx=cx+(r+45)*Math.cos(rd),ty=cy+(r+45)*Math.sin(rd);svg+=`<line x1="${cx}" y1="${cy}" x2="${lx}" y2="${ly}" stroke="#94a3b8" stroke-width="2" stroke-dasharray="4,4"/><g transform="translate(${tx},${ty})"><text y="-8" class="cardinal-label" text-anchor="middle" fill="${o.c}">${o.n}</text><text y="5" class="cardinal-sub" text-anchor="middle">Rashi ${_nR(l.rashi+o.r)}</text><text y="15" class="cardinal-sub" text-anchor="middle" font-family="monospace">${_dm(l.deg%30)}</text></g>`;});let ls="",ds="",ts="";p.forEach(x=>{const rd=_tR(-90-x.visualDist),px=cx+x.radius*Math.cos(rd),py=cy+x.radius*Math.sin(rd),lx=cx+(x.radius+10)*Math.cos(rd),ly=cy+(x.radius+10)*Math.sin(rd);ls+=`<line x1="${cx}" y1="${cy}" x2="${px}" y2="${py}" stroke="rgba(0, 0, 0, 0.06)" stroke-width="1" />`;ds+=`<circle cx="${px}" cy="${py}" r="3.5" fill="#1e293b" stroke="white" stroke-width="1.5"/>`;ts+=`<text x="${lx}" y="${ly}" class="planet-label planet-label-glow" text-anchor="middle" dominant-baseline="central" font-weight="bold" style="font-size: 10px;">${x.symbol}</text>`;});c.innerHTML=svg+ls+ds+ts+`</svg>`;}</script>
</body>
</html>